$# bundle.py ‚Äî –°–±–æ—Ä—â–∏–∫ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ Markdown-–±–∞–Ω–¥–ª
$
$–°–∫—Ä–∏–ø—Ç `bundle.py` —Å–æ–±–∏—Ä–∞–µ—Ç —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤ –æ–¥–∏–Ω —á–∏—Ç–∞–µ–º—ã–π Markdown-–¥–æ–∫—É–º–µ–Ω—Ç,  
$–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–ª—è –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏, –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã.  
$–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
$
$## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
$
$- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–æ–∫**: UTF-8, Windows-1251, CP866, KOI8-R, ASCII –∏ –¥—Ä.  
$- **–ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞**: –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –∫ UTF-8 —Å LF-–æ–∫–æ–Ω—á–∞–Ω–∏—è–º–∏ —Å—Ç—Ä–æ–∫ (`\n`)  
$- **–¢–æ—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ**: –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –±–∞–π—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ base64-–±–ª–æ–∫–∞—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  
$- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤**: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, DLL, –∞—Ä—Ö–∏–≤—ã ‚Äî –≤—Å—ë –≤ base64  
$- **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**: —è–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–æ–∫, —à–∞–±–ª–æ–Ω—ã —Ñ–∞–π–ª–æ–≤, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π  
$- **–û–ø—Ü–∏—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞**: `--no-binary-backup` –æ—Ç–∫–ª—é—á–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ base64  
$- **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å**: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Windows, Linux, macOS
$
$## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
$
$```bash
$# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
$pip install charset-normalizer
$
$# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ bundle.md
$python bundle.py . -o bundle.md -p "*.cpp,*.h,*.py"
$
$# –°–±–æ—Ä–∫–∞ —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –¥–ª—è –ª–æ–≥–æ–≤
$python bundle.py . --encoding="*.log:windows-1251" -p "*.cpp,*.log"
$
$# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –±–∞–Ω–¥–ª –±–µ–∑ base64-–¥—É–±–ª–µ–π
$python bundle.py . --no-binary-backup -o quick.md -p "*.py"
$```
$
$## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
$
$| –û–ø—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
$|--------|----------|
$| `root` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `.`) | –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞ |
$| `-o`, `--output` | –ò–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `bundle.md`) |
$| `-p`, `--patterns` | –®–∞–±–ª–æ–Ω—ã —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (glob), –Ω–∞–ø—Ä–∏–º–µ—Ä: `"*.cpp,*.h"` |
$| `--ignore` | –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –ø—Ä–æ–ø—É—Å–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä: `".git,build,node_modules"` |
$| `--encoding` | –ö–æ–¥–∏—Ä–æ–≤–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–ª–∏ –º–∞–ø–ø–∏–Ω–≥: `"win1251"` –∏–ª–∏ `"*.txt:cp866,*.log:windows-1251"` |
$| `--no-binary-backup` | –ù–µ –¥–æ–±–∞–≤–ª—è—Ç—å base64-–±–ª–æ–∫–∏ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º–∏ –±–∞–π—Ç–∞–º–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ |
$
$## üìÇ –§–æ—Ä–º–∞—Ç –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –±–∞–Ω–¥–ª–∞
$
$–ë–∞–Ω–¥–ª —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–µ–∫—Ü–∏–π, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç:
$
$1. **–ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ñ–∞–π–ª–∞**  
$   ```markdown
$   ## `src/main.cpp`
$   ```
$
$2. **–ú–µ—Ç–∞-–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π** (–¥–ª—è –º–∞—à–∏–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏)  
$   ```html
$   <!-- bundle:encoding=windows-1251 -->
$   ```
$
$3. **–û—Å–Ω–æ–≤–Ω–æ–π –±–ª–æ–∫ –∫–æ–¥–∞** ‚Äî –≤—Å–µ–≥–¥–∞ –≤ UTF-8 —Å LF-–æ–∫–æ–Ω—á–∞–Ω–∏—è–º–∏  
$   ````markdown
$   ```cpp
$   // –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –≤ —á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ
$   ```
$   ````
$
$4. **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) Base64-–±–ª–æ–∫** ‚Äî —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –≤ UTF-8 –∏ –Ω–µ –∑–∞–¥–∞–Ω `--no-binary-backup`  
$   ````markdown
$   ## `src/main.cpp` (original bytes)
$   ```base64
$   Ly8g0J/RgNC40LLQtdGC0YHRgtC4IQ==
$   ```
$   ````
$
$> üí° **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã (—Å–æ–¥–µ—Ä–∂–∞—â–∏–µ `\x00`) –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ base64.
$
$## üìå –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
$
$- **UTF-8 (–≤–∫–ª—é—á–∞—è UTF-8-BOM)** ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, –±–µ–∑ base64-–¥—É–±–ª—è  
$- **Windows-1251, CP866, KOI8-R –∏ –¥—Ä.** ‚Üí –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —á–∏—Ç–∞–µ–º—ã–π UTF-8 + (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) base64  
$- **–û–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ç—Ä–æ–∫** ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑—É—é—Ç—Å—è –¥–æ LF (`\n`) –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –±–ª–æ–∫–µ; –æ—Ä–∏–≥–∏–Ω–∞–ª—ã ‚Äî –≤ base64  
$- **–ë–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã** ‚Üí –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ –Ω–∞–ª–∏—á–∏—é –Ω—É–ª–µ–≤–æ–≥–æ –±–∞–π—Ç–∞ (`\x00`) ‚Üí —Ç–æ–ª—å–∫–æ base64  
$- **–û–ø—Ü–∏—è `--no-binary-backup`** ‚Üí –æ—Ç–∫–ª—é—á–∞–µ—Ç base64 –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤, –Ω–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –±–∏–Ω–∞—Ä–Ω—ã–µ
$
$## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
$
$- Python 3.6+
$- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `charset-normalizer` (—É—Å—Ç–∞–Ω–æ–≤–∫–∞: `pip install charset-normalizer`)
$
$## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
$
$**Q: –ó–∞—á–µ–º –Ω—É–∂–µ–Ω base64-–±–ª–æ–∫, –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç —É–∂–µ –≤ UTF-8?**  
$A: –ß—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ **—Ç–æ—á–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª (–≤–∫–ª—é—á–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫—É, BOM, CRLF –∏ —Ç.–¥.).
$
$**Q: –ú–æ–∂–Ω–æ –ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç—å base64 –ø–æ–ª–Ω–æ—Å—Ç—å—é?**  
$A: –î–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ ‚Äî –¥–∞, —á–µ—Ä–µ–∑ `--no-binary-backup`.  
$   –î–ª—è –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ ‚Äî –Ω–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ —Ç–µ–∫—Å—Ç.
$
$**Q: –ü–æ—á–µ–º—É –º–æ–π `.bat`-—Ñ–∞–π–ª –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –±–∏–Ω–∞—Ä–Ω—ã–π?**  
$A: –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω—É–ª–µ–≤–æ–π –±–∞–π—Ç (`\x00`) –∏–ª–∏ –Ω–µ–¥–µ–∫–æ–¥–∏—Ä—É–µ–º—ã–µ —Å–∏–º–≤–æ–ª—ã.  
$   –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫—É ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, –æ–Ω –≤ UTF-16. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ —É–∫–∞–∂–∏—Ç–µ —è–≤–Ω–æ: `--encoding="*.bat:utf-16"`.
$
$## üìú –õ–∏—Ü–µ–Ω–∑–∏—è
$
$–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª, –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –≥–∞—Ä–∞–Ω—Ç–∏–π.  
$–í—ã –º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å –µ–≥–æ –≤ —Å–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö.
$
$## üôå –ê–≤—Ç–æ—Ä
$
$–î–º–∏—Ç—Ä–∏–π "dilukhin" –ò–ª—é—Ö–∏–Ω